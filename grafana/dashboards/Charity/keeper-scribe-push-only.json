{
  "uid": "charity-push-only",
  "title": "Charity — Keeper/Scribe (Push-only)",
  "schemaVersion": 39,
  "version": 1,
  "timezone": "browser",
  "tags": ["charity","keeper","scribe","pushgateway"],
  "refresh": "10s",
  "time": {"from":"now-6h","to":"now"},
  "panels": [
    {
      "type": "stat",
      "title": "Pushgateway UP",
      "gridPos": {"x":0,"y":0,"w":6,"h":4},
      "targets": [{"expr":"max(up{job=\"pushgateway\"})"}],
      "options": {
        "reduceOptions": {"calcs":["lastNotNull"],"fields":"","values":false},
        "colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","textMode":"auto"
      },
      "fieldConfig": {"defaults":{"thresholds":{"mode":"absolute","steps":[{"color":"red"},{"color":"green","value":1}]}},"overrides":[]}
    },
    {
      "type": "timeseries",
      "title": "Keeper — events rate",
      "gridPos": {"x":0,"y":4,"w":24,"h":8},
      "targets": [{"expr":"sum by(service) (rate(keeper_events_total[5m]))","legendFormat":"{{service}}"}]
    },
    {
      "type": "timeseries",
      "title": "Scribe — batches rate",
      "gridPos": {"x":0,"y":12,"w":24,"h":8},
      "targets": [{"expr":"sum by(service) (rate(scribe_batches_total[5m]))","legendFormat":"{{service}}"}]
    },
    {
      "type": "table",
      "title": "Raw push metrics (debug)",
      "gridPos": {"x":0,"y":20,"w":24,"h":8},
      "options": {"showHeader": true},
      "targets": [
        {"expr":"keeper_events_total"},
        {"expr":"scribe_batches_total"}
      ]
    }
  ]
}
